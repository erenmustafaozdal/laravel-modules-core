function loadScript(a,b){if(!loadAPIPromise){var c=$.Deferred();$.getScript(a).done(function(a,b){c.resolve()}).fail(function(b,c,d){console.log("Unable to load script: "+a),console.log(d)}),loadAPIPromise=c.promise()}loadAPIPromise.done(b)}!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof module&&module.exports?module.exports=a(require("jquery")):a(window.jQuery)}(function(a){var b=function(b){var c=this,d=b.options,e=!1;for(var f in d.toolbar){var g=d.toolbar[f][1];if(a.inArray("map",g)>-1){e=!0;break}}if(e){var h=a.summernote.ui,i=b.layoutInfo.editor,j=d.langInfo,k={apiKey:"",center:{lat:-33.8688,lng:151.2195},zoom:13};d.map=a.extend(k,d.map);const l="http://maps.google.com/maps/api/js?key=API_KEY&libraries=places".replace("API_KEY",d.map.apiKey),m="https://www.google.com/maps/embed/v1/place?key=API_KEY&q=PLACE".replace("API_KEY",d.map.apiKey);b.memo("button.map",function(){var a=h.button({contents:"<i class='fa fa-map-o'/>",tooltip:j.mapButton.tooltip,click:function(a){c.show()}});return a.render()}),this.createMapDialog=function(a){var b={title:j.mapDialog.title,body:'<div class="form-group"><label>'+j.mapDialog.label+'</label><input id="input-autocomplete" class="form-control" type="text" placeholder="'+j.mapDialog.placeholder+'" /></div><div id="map-in-dialog" style="height: 300px;"></div>',footer:'<button href="#" id="btn-add" class="btn btn-primary">'+j.mapDialog.button+"</button>",closeOnEscape:!0};c.$dialog=h.dialog(b).render().appendTo(a),c.$dialog.css({"z-index":"20",height:"100%"}),c.$addBtn=c.$dialog.find("#btn-add"),c.$mapInput=c.$dialog.find("#input-autocomplete")[0],c.$mapContainer=c.$dialog.find("#map-in-dialog")[0]},this.enableAddButton=function(){c.$mapInput.value&&c.$mapInput.value.length>0&&c.$addBtn.attr("disabled",!1)},this.disableAddButton=function(){c.$addBtn.attr("disabled",!0)},this.initMap=function(){c.map=new google.maps.Map(c.$mapContainer,{center:d.map.center,zoom:d.map.zoom}),c.autocomplete=new google.maps.places.Autocomplete(c.$mapInput),c.autocomplete.bindTo("bounds",c.map),c.marker=new google.maps.Marker({map:c.map,anchorPoint:new google.maps.Point(0,(-29))}),google.maps.event.addListener(c.autocomplete,"place_changed",function(){c.marker.setVisible(!1);var a=c.autocomplete.getPlace();return a.geometry?(a.geometry.viewport?c.map.fitBounds(a.geometry.viewport):(c.map.setCenter(a.geometry.location),c.map.setZoom(d.map.zoom)),c.marker.setIcon({url:a.icon,size:new google.maps.Size(71,71),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(35,35)}),c.marker.setPosition(a.geometry.location),c.marker.setVisible(!0),void c.enableAddButton()):(c.disableAddButton(),void console.log("Autocomplete's returned place contains no geometry"))})},this.showMapDialog=function(){return c.disableAddButton(),c.$mapInput.value="",a.Deferred(function(d){h.onDialogShown(c.$dialog,function(){b.triggerEvent("dialog.shown"),c.$mapInput.focus(),google.maps.event.trigger(c.map,"resize"),a(".modal-backdrop").css("z-index",10),c.$addBtn.click(function(a){a.preventDefault(),d.resolve({place:c.$mapInput.value})})}),h.onDialogHidden(c.$dialog,function(){c.marker.setVisible(!1),c.$addBtn.off("click"),"pending"===d.state()&&d.reject()}),h.showDialog(c.$dialog)})},this.show=function(){b.invoke("editor.saveRange"),c.showMapDialog().then(function(a){b.invoke("editor.restoreRange"),c.insertEmbedMapToEditor(a.place),h.hideDialog(c.$dialog)}).fail(function(){b.invoke("editor.restoreRange")})},this.insertEmbedMapToEditor=function(c){var d=a("<div>");d.css({position:"relative","padding-top":"25px","padding-bottom":"56.25%",height:"0"});var e=a("<iframe>",{src:m.replace("PLACE",c),height:"250px"});e.css({position:"absolute",top:"0",left:"0",width:"100%",height:"400px"}),d.html(e),b.invoke("editor.insertNode",d[0])},this.initialize=function(){var b=d.dialogsInBody?a(document.body):i;c.createMapDialog(b)},this.destroy=function(){h.hideDialog(c.$dialog),c.$dialog.remove()},this.events={"summernote.init":function(a,b){"object"==typeof google&&"object"==typeof google.maps?c.initMap():loadScript(l,c.initMap)}}}};a.extend(!0,a.summernote,{lang:{"en-US":{mapButton:{tooltip:"Map"},mapDialog:{title:"Insert Map",label:"Place name or Address",placeholder:"e.g. Eiffel Tower",button:"Insert Map"}},"th-TH":{mapButton:{tooltip:"แผนที่"},mapDialog:{title:"แทรกแผนที่",label:"ชื่อสถานที่หรือที่อยู่",placeholder:"e.g. Eiffel Tower",button:"แทรกแผนที่"}},"tr-TR":{mapButton:{tooltip:"Harita"},mapDialog:{title:"Harita Ekle",label:"Yer adı veya adress",placeholder:"Ör. Ankara",button:"Haritayı Ekle"}}},plugins:{map:b}})});var loadAPIPromise;