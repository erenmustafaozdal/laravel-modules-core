var UserShow,Show={isAuthUser:!1,top_src:"",nav_src:"",options:{fileinputSrc:"#photo",formSrc:"#change-avatar-form"},form:null,init:function(){UserShow=this,this.isAuthUser=isAuthUser,this.form=$(this.options.formSrc),LMCFileinput.init(this.getFileinputInitOptions()),$("#destroy-avatar").on("click",function(s){var e=avatarPhotoPath+"/small.jpg",r=avatarPhotoPath+"/big.jpg";UserShow.changeAvatar("remove",e,r),LMCApp.startDestroyTimer(function(){$.ajax({url:destroyAvatarURL,success:function(s){return"success"===s.result?void LMCApp.getNoty({message:LMCApp.lang.admin.flash.destroy_success.message,title:LMCApp.lang.admin.flash.destroy_success.title,type:"success"}):(LMCApp.getNoty({message:LMCApp.lang.admin.flash.destroy_error.message,title:LMCApp.lang.admin.flash.destroy_error.title,type:"error"}),void UserShow.changeAvatar("add",UserShow.top_src,UserShow.nav_src))}})},function(){UserShow.changeAvatar("add",UserShow.top_src,UserShow.nav_src)})}),Validation.init({src:"#user-edit-info",isAjax:!1,validate:{rules:{first_name:{required:!0},last_name:{required:!0}},messages:userEditInfoMessages}}),Validation.init({src:"#user-change-password",isAjax:!1,validate:{rules:{password:{required:!0,minlength:6},password_confirmation:{required:!0,minlength:6,equalTo:"#password"}},messages:userChangePasswordMessages}})},changeAvatar:function(s,e,r){if(this.isAuthUser){var t=$("li.dropdown-user").find("img");this.top_src=t.prop("src"),t.prop("src",e)}var a=$("img#nav-profile-photo");this.nav_src=a.prop("src"),a.prop("src",r);var i=$("#destroy-avatar").closest("li");return"add"===s?void i.removeClass("hidden"):void i.addClass("hidden")},fileUploaded:function(s){return"success"!=s.result?void LMCApp.getNoty({message:LMCApp.lang.admin.flash.update_error.message,title:LMCApp.lang.admin.flash.update_error.title,type:"error"}):(this.changeAvatar("add",s.photos[0].thumbnails.small,s.photos[0].thumbnails.big),LMCFileinput.clear(),void LMCApp.getNoty({message:LMCApp.lang.admin.flash.update_success.message,title:LMCApp.lang.admin.flash.update_success.title,type:"success"}))},getFileinputInitOptions:function(){return{src:UserShow.options.fileinputSrc,formSrc:UserShow.options.formSrc,fileinput:{uploadUrl:UserShow.form.prop("action")},fileuploaded:function(s,e,r,t){UserShow.fileUploaded(e.response)},filebatchuploadsuccess:function(s,e,r,t){UserShow.fileUploaded(e.response)}}}};