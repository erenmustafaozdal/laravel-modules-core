var ModelIndex,Index={options:{},init:function(e){ModelIndex=this,this.options=$.extend(!0,this.getDefaultOptions(),e),this.options.DataTable.datatableFilterSupport&&LMCApp.initDatepicker(),DataTable.init(this.options.DataTable),Editor.init(this.options.Editor),LMCFileinput.init(this.options.Fileinput),LMCFileinput.init(this.options.mainPhotoFileinput),LMCFileinput.init(this.options.firstMiniFileinput),LMCFileinput.init(this.options.secondMiniFileinput),LMCFileinput.init(this.options.thirdMiniFileinput),$(".color-picker").minicolors({control:"hue",letterCase:"lowercase",position:"bottom right",theme:"bootstrap"}),$(DataTable.tableOptions.src+" tbody").on("click","tr td ul.dropdown-menu a.fast-publish",function(){var e=$(this).closest("tr"),t=theDataTable.getDataTable(),i=t.row(e);$.ajax({url:i.data().urls.publish,success:function(e){return"success"===e.result?void LMCApp.getNoty({message:LMCApp.lang.admin.flash.publish_success.message,title:LMCApp.lang.admin.flash.publish_success.title,type:"success"}):void LMCApp.getNoty({message:LMCApp.lang.admin.flash.publish_error.message,title:LMCApp.lang.admin.flash.publish_error.title,type:"error"})}}).done(function(e){"success"===e.result&&(LMCApp.hasTransaction=!1,t.draw())})}),$(DataTable.tableOptions.src+" tbody").on("click","tr td ul.dropdown-menu a.fast-not-publish",function(){var e=$(this).closest("tr"),t=theDataTable.getDataTable(),i=t.row(e);$.ajax({url:i.data().urls.not_publish,success:function(e){return"success"===e.result?void LMCApp.getNoty({message:LMCApp.lang.admin.flash.not_publish_success.message,title:LMCApp.lang.admin.flash.not_publish_success.title,type:"success"}):void LMCApp.getNoty({message:LMCApp.lang.admin.flash.not_publish_error.message,title:LMCApp.lang.admin.flash.not_publish_error.title,type:"error"})}}).done(function(e){"success"===e.result&&(LMCApp.hasTransaction=!1,t.draw())})})},getDefaultOptions:function(){return{DataTable:{src:".lmcDataTable",exportTitle:"Slaytlar",datatableIsResponsive:!0,groupActionSupport:!0,rowDetailSupport:!1,datatableFilterSupport:!0,exportColumnSize:3,exportOrientation:"landscape",exportOptionsFormat:{body:function(e,t,i){return LMCApp.stripTags(e)}},isRelationTable:!1,changeRelationTable:function(){},onSuccess:function(e,t){},onError:function(e){},onDataLoad:function(e){},onDeleteError:function(e){},getDetailTableFormat:function(e){},exportOptions:{columns:[]},dataTable:{columns:[{data:"id",name:"id",className:"text-center"},{data:"photo",name:"photo",searchable:!1,orderable:!1,className:"text-center",render:function(e,t,i,a){return null!=e?'<img src="'+e+'" height="150">':""}},{data:"status",name:"is_publish",className:"text-center",render:function(e,t,i,a){return e?'<span class="label label-success"> Yayında </span>':'<span class="label label-danger"> Yayında Değil </span>'}},{data:{_:"created_at.display",sort:"created_at.timestamp"},name:"created_at",className:"text-center"},{data:"action",name:"action",searchable:!1,orderable:!1,className:"text-center",render:function(e,t,i,a){var s={id:i.id,showUrl:null,buttons:[{title:'<i class="fa fa-trash"></i> '+LMCApp.lang.admin.ops.destroy,attributes:{href:"javascript:;","class":"fast-destroy"}},"divider"]};return s.buttons.push({title:i.status?'<i class="fa fa-times"></i> '+LMCApp.lang.admin.ops.not_publish:'<i class="fa fa-check"></i> '+LMCApp.lang.admin.ops.publish,attributes:{href:"javascript:;","class":i.status?"fast-not-publish":"fast-publish"}}),theDataTable.getActionMenu(s)}}],ajax:{url:ajaxURL}}},Editor:{modalShowCallback:function(e){},actionButtonCallback:function(e){$script(formLoaderJs,"formLoader"),$script.ready(["formLoader","validation"],function(){$script(formJs,"form")}),$script.ready("form",function(){ModelForm.init({isAjax:!0,submitAjax:function(t){var i=$("#photo"),a=LMCFileinputs["#photo"].isEnable;return"fast-add"===e.actionType&&a?void i.fileinput("upload"):void $.ajax({url:apiStoreURL,data:{photo:t.form.find('input.elfinder[name="photo"]').val(),is_publish:t.form.find('input[name="is_publish"]').bootstrapSwitch("state")},type:"POST",success:function(t){return"success"===t.result?(LMCApp.getNoty({message:LMCApp.lang.admin.flash.store_success.message,title:LMCApp.lang.admin.flash.store_success.title,type:"success"}),void e.modal.modal("hide")):void LMCApp.getNoty({message:LMCApp.lang.admin.flash.store_error.message,title:LMCApp.lang.admin.flash.update_error.title,type:"error"})}}).done(function(e){"success"===e.result&&(LMCApp.hasTransaction=!1,DataTable.dataTable.ajax.reload())})}}),$(e.editorOptions.formSrc).submit()})}},Fileinput:{src:"#photo",fileinput:{uploadUrl:apiStoreURL,allowedFileExtensions:validExtension.split(","),allowedFileTypes:null,previewFileType:"any",showUpload:!1,showCancel:!1,fileActionSettings:{showUpload:!1},uploadExtraData:function(e,t){var i=$(".form");return{is_publish:i.find('input[name="is_publish"]').bootstrapSwitch("state")}},ajaxSettings:{success:function(e){var t,i,a,s;return"fast-add"===Editor.actionType?(t=LMCApp.lang.admin.flash.store_success.message,i=LMCApp.lang.admin.flash.store_success.title,a=LMCApp.lang.admin.flash.store_error.message,s=LMCApp.lang.admin.flash.store_error.title):(t=LMCApp.lang.admin.flash.update_success.message,i=LMCApp.lang.admin.flash.update_success.title,a=LMCApp.lang.admin.flash.update_error.message,s=LMCApp.lang.admin.flash.update_error.title),"success"===e.result?(LMCApp.getNoty({message:t,title:i,type:"success"}),Editor.modal.modal("hide"),LMCApp.hasTransaction=!1,void DataTable.dataTable.ajax.reload()):void LMCApp.getNoty({message:a,title:s,type:"error"})}}}},mainPhotoFileinput:{src:"#main-photo",formSrc:"form.form-horizontal",aspectRatio:mainAspectRatio,fileinput:{maxFileSize:maxSize,showUpload:!1,showCancel:!1,fileActionSettings:{showUpload:!1},previewTemplates:{image:'<div class="file-preview-frame" id="{previewId}" data-fileindex="{fileindex}" data-template="{template}">\n   <div class="kv-file-content">       <img id="img-{previewId}" src="{data}" class="kv-preview-data file-preview-image jcrop-item" title="{caption}" alt="{caption}">\n   </div>\n   {footer}\n   <input type="hidden" class="crop-x" name="photo[x]" value="0">\n   <input type="hidden" class="crop-y" name="photo[y]" value="0">\n   <input type="hidden" class="crop-width" name="photo[width]" value="0">\n   <input type="hidden" class="crop-height" name="photo[height]" value="0">\n</div>\n'}}},firstMiniFileinput:{src:"#first-mini-photo",formSrc:"form.form-horizontal",aspectRatio:firstAspectRatio,fileinput:{maxFileSize:maxSize,showUpload:!1,showCancel:!1,fileActionSettings:{showUpload:!1},previewTemplates:{image:'<div class="file-preview-frame" id="{previewId}" data-fileindex="{fileindex}" data-template="{template}">\n   <div class="kv-file-content">       <img id="img-{previewId}" src="{data}" class="kv-preview-data file-preview-image jcrop-item" title="{caption}" alt="{caption}">\n   </div>\n   {footer}\n   <input type="hidden" class="crop-x" name="first_mini_photo[x]" value="0">\n   <input type="hidden" class="crop-y" name="first_mini_photo[y]" value="0">\n   <input type="hidden" class="crop-width" name="first_mini_photo[width]" value="0">\n   <input type="hidden" class="crop-height" name="first_mini_photo[height]" value="0">\n</div>\n'}}},secondMiniFileinput:{src:"#second-mini-photo",formSrc:"form.form-horizontal",aspectRatio:secondAspectRatio,fileinput:{maxFileSize:maxSize,showUpload:!1,showCancel:!1,fileActionSettings:{showUpload:!1},previewTemplates:{image:'<div class="file-preview-frame" id="{previewId}" data-fileindex="{fileindex}" data-template="{template}">\n   <div class="kv-file-content">       <img id="img-{previewId}" src="{data}" class="kv-preview-data file-preview-image jcrop-item" title="{caption}" alt="{caption}">\n   </div>\n   {footer}\n   <input type="hidden" class="crop-x" name="second_mini_photo[x]" value="0">\n   <input type="hidden" class="crop-y" name="second_mini_photo[y]" value="0">\n   <input type="hidden" class="crop-width" name="second_mini_photo[width]" value="0">\n   <input type="hidden" class="crop-height" name="second_mini_photo[height]" value="0">\n</div>\n'}}},thirdMiniFileinput:{src:"#third-mini-photo",formSrc:"form.form-horizontal",aspectRatio:thirdAspectRatio,fileinput:{maxFileSize:maxSize,showUpload:!1,showCancel:!1,fileActionSettings:{showUpload:!1},previewTemplates:{image:'<div class="file-preview-frame" id="{previewId}" data-fileindex="{fileindex}" data-template="{template}">\n   <div class="kv-file-content">       <img id="img-{previewId}" src="{data}" class="kv-preview-data file-preview-image jcrop-item" title="{caption}" alt="{caption}">\n   </div>\n   {footer}\n   <input type="hidden" class="crop-x" name="third_mini_photo[x]" value="0">\n   <input type="hidden" class="crop-y" name="third_mini_photo[y]" value="0">\n   <input type="hidden" class="crop-width" name="third_mini_photo[width]" value="0">\n   <input type="hidden" class="crop-height" name="third_mini_photo[height]" value="0">\n</div>\n'}}}}}};