var theLMCJcrop,LMCAspectRatio,LMCJcrop={options:{},elements:{},apis:{},boundxs:{},boundys:{},init:function(t){theLMCJcrop=this,this.options=$.extend(!0,this.getDefaultOptions(),t)},setupElement:function(t,i){var e="img-"+t,o=$("#"+e);o.css("width","100%");var n=o.width(),p=o.height();this.elements[e]=o,this.options.jcrop.boxWidth=n,this.options.jcrop.boxHeight=p,void 0!=LMCAspectRatio&&(this.options.jcrop.aspectRatio=LMCAspectRatio),void 0!=i&&void 0!=i.aspectRatio&&(this.options.jcrop.aspectRatio=i.aspectRatio),o.Jcrop(this.options.jcrop,function(){theLMCJcrop.boundxs[e]=o[0].naturalWidth,theLMCJcrop.boundys[e]=o[0].naturalHeight,theLMCJcrop.apis[e]=this})},jcropReset:function(){this.resetFormElements(),this.api&&(this.api.ui.holder.remove(),this.release(),this.api.destroy(),this.apis={})},setFormElements:function(t,i){$('input.crop-x[type="hidden"]',i).val(t.x1),$('input.crop-y[type="hidden"]',i).val(t.y1),$('input.crop-width[type="hidden"]',i).val(t.width),$('input.crop-height[type="hidden"]',i).val(t.height)},resetFormElements:function(t){var i,e,o,n;return void 0===t?(i=$('input.crop-x[type="hidden"]'),e=$('input.crop-y[type="hidden"]'),o=$('input.crop-width[type="hidden"]'),void(n=$('input.crop-height[type="hidden"]'))):(i=$('input.crop-x[type="hidden"]',t),e=$('input.crop-y[type="hidden"]',t),o=$('input.crop-width[type="hidden"]',t),n=$('input.crop-height[type="hidden"]',t),i.val(0),e.val(0),o.val(0),void n.val(0))},release:function(){this.api.animateTo([0,0,0,0],function(){theLMCJcrop.api.release()})},getCropSize:function(t,i){var e=this.elements[i],o=this.boundxs[i],n=this.boundys[i],p=o/e.width(),h=n/e.height();return{width:Math.round(p*t.w),height:Math.round(h*t.h),x1:Math.round(p*t.x),y1:Math.round(h*t.y),x2:Math.round(p*t.x2),y2:Math.round(h*t.y2)}},getDefaultOptions:function(){var t=void 0==aspectRatio?1:aspectRatio;return{src:"",jcrop:{boxWidth:0,boxHeight:0,bgFade:!0,bgOpacity:.2,bgColor:"white",aspectRatio:t,onRelease:function(t){var i=this.ui.holder.offsetParent().prop("id");theLMCJcrop.resetFormElements($("#"+i))},onSelect:function(t){var i=this.ui.holder.offsetParent().prop("id"),e="img-"+i,o=theLMCJcrop.getCropSize(t,e);theLMCJcrop.setFormElements(o,$("#"+i))}}}}};