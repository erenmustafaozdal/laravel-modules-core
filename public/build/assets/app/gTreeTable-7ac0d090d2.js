var theGTreeTable,GTreeTable={options:{},element:null,init:function(e){theGTreeTable=this,this.options=$.extend(!0,this.getDefaultOptions(),e),(this.options.relationLinks.category||this.options.relationLinks.model)&&this.options.gtreetable.actions.push({divider:!0}),this.options.relationLinks.category&&this.options.gtreetable.actions.push({name:LMCApp.lang.admin.ops.relation_categories,event:function(e,t){window.location.href=theGTreeTable.options.relationURLs.category.replace("###id###",e.id)}}),this.options.relationLinks.model&&this.options.gtreetable.actions.push({name:LMCApp.lang.admin.ops.relations,event:function(e,t){window.location.href=theGTreeTable.options.relationURLs.model.replace("###id###",e.id)}}),e.hasOwnProperty("gtreetable")&&e.gtreetable.hasOwnProperty("actions")&&this.options.gtreetable.actions.length!=e.gtreetable.actions.length&&(this.options.gtreetable.actions=e.gtreetable.actions),this.element=$(this.options.src),this.element.gtreetable(this.options.gtreetable)},onSave:function(e){if(0!=theGTreeTable.options.nestableLevel&&e.level>theGTreeTable.options.nestableLevel)return theGTreeTable.getLevelError(),{beforeSend:function(e,t){return!1}};var t=e.isSaved()?"PATCH":"POST";return{url:e.isSaved()?apiUpdateURL.replace("###id###",e.getId()):apiStoreURL,type:t,data:{parent:e.getParent(),name:e.getName(),position:e.getInsertPosition(),related:e.getRelatedNodeId()}}},onDelete:function(e){return{url:apiDestroyURL.replace("###id###",e.getId()),type:"DELETE"}},onMove:function(e,t,n){var o=t.level,a=theGTreeTable.options.nestableLevel,l=n;return 0!=a&&(o>a||o==a&&-1!=l.search("Child"))?(theGTreeTable.getLevelError(),{beforeSend:function(e,t){return!1}}):{url:apiMoveURL.replace("###id###",e.getId()),data:{related:t.getId(),position:n}}},source:function(e){return{url:ajaxURL,type:"GET",data:{id:e}}},getLevelError:function(){lmcApp.getNoty({title:LMCApp.lang.admin.flash.nestable_level_error.title,message:LMCApp.lang.admin.flash.nestable_level_error.message,type:"error"})},getDefaultOptions:function(){return{src:".gtreetable",relationLinks:{category:!1,model:!1},relationURLs:{category:!1,model:!1},nestableLevel:0,gtreetable:{language:"tr",cache:1,draggable:!0,manyroots:!0,selectLimit:0,onSave:theGTreeTable.onSave,onDelete:theGTreeTable.onDelete,onMove:theGTreeTable.onMove,source:theGTreeTable.source,actions:[{name:LMCApp.lang.admin.ops.show,event:function(e,t){window.location.href=showURL.replace("###id###",e.id)}},{name:LMCApp.lang.admin.ops.edit,event:function(e,t){window.location.href=editURL.replace("###id###",e.id)}}],types:{"default":"glyphicon glyphicon-file",file:"glyphicon glyphicon-file",folder:"glyphicon glyphicon-folder-open"},templateParts:{draggableIcon:'<span class="node-icon-handle">&zwnj;</span><span class="node-draggable-pointer">&zwnj;</span>',indent:'<span class="node-indent">&zwnj;</span>',ecIcon:'<span class="node-icon-ce icon"></span>',selectedIcon:'<span class="node-icon-selected icon"></span>',typeIcon:'<span class="node-icon-type"></span>',name:'<span class="node-name"></span>',input:'<input type="text" name="name" value="" style="width: 60%" class="form-control form-control-solid placeholder-no-fix" />',saveButton:'<button type="button" class="btn btn-sm blue btn-outline node-save"> Kaydet </button>',cancelButton:'<button type="button" class="btn btn-sm red btn-outline node-cancel"> Vazgeç </button>',actionsButton:'<button type="button" class="btn btn-sm dark btn-outline dropdown-toggle" data-toggle="dropdown"> İşlem <span class="caret"></span></button>',actionsList:""}}}}};