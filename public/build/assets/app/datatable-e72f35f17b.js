var theDataTable,DataTable={tableOptions:{},options:{},table:null,tableContainer:null,tableWrapper:null,dataTable:null,tableInitialized:!1,ajaxParams:{},init:function(t){if($().dataTable){theDataTable=this,theDataTable.options=t,theDataTable.tableOptions=$.extend(!0,theDataTable.getDefaultOptions(),t),theDataTable.table=$(theDataTable.tableOptions.src),theDataTable.tableContainer=theDataTable.table.parents(".table-container");var a=$.fn.dataTableExt.oStdClasses;$.fn.dataTableExt.oStdClasses.sWrapper=$.fn.dataTableExt.oStdClasses.sWrapper+" dataTables_extended_wrapper",$.fn.dataTableExt.oStdClasses.sFilterInput="form-control input-xs input-sm input-inline",$.fn.dataTableExt.oStdClasses.sLengthSelect="form-control input-xs input-sm input-inline",theDataTable.dataTable=theDataTable.table.DataTable(theDataTable.tableOptions.dataTable),$.fn.dataTableExt.oStdClasses.sWrapper=a.sWrapper,$.fn.dataTableExt.oStdClasses.sFilterInput=a.sFilterInput,$.fn.dataTableExt.oStdClasses.sLengthSelect=a.sLengthSelect,theDataTable.tableWrapper=theDataTable.table.parents(".dataTables_wrapper"),1===$(".table-actions-wrapper",theDataTable.tableContainer).size()&&($(".table-group-actions",theDataTable.tableWrapper).html($(".table-actions-wrapper",theDataTable.tableContainer).html()),$(".table-actions-wrapper",theDataTable.tableContainer).remove()),$(".group-checkable",theDataTable.table).change(function(){var t=theDataTable.table.find('tbody > tr > td:nth-child(1) input[type="checkbox"]'),a=$(this).prop("checked");$(t).each(function(){$(this).prop("checked",a)}),$.uniform.update(t),theDataTable.countSelectedRecords()}),theDataTable.table.on("change",'tbody > tr > td:nth-child(1) input[type="checkbox"]',function(){theDataTable.countSelectedRecords()}),theDataTable.table.on("click",".filter-submit",function(t){t.preventDefault(),theDataTable.submitFilter()}),theDataTable.table.on("click",".filter-cancel",function(t){t.preventDefault(),theDataTable.resetFilter()}),$("#lmcDataTableTools > li > a.tool-action").on("click",function(){var t=$(this).attr("data-action");theDataTable.getDataTable().button(t).trigger()}),$(theDataTable.tableOptions.src+" tbody").on("click","tr td.control",function(){var t=$(this).closest("tr"),a=theDataTable.getDataTable().row(t);a.child.isShown()?(a.child.hide(),t.removeClass("parent")):$.ajax({url:a.data().urls.details,type:"GET",success:function(e){a.child(theDataTable.tableOptions.getDetailTableFormat(e.data[0])).show(),t.addClass("parent").next().addClass("child").children("td").addClass("child")}})}),$(theDataTable.tableOptions.src+" tbody").on("click","tr td ul.dropdown-menu a.fast-destroy",function(){var t=$(this).closest("tr"),a=theDataTable.getDataTable().row(t);t.fadeOut(),LMCApp.startDestroyTimer(function(){$.ajax({url:a.data().urls.destroy,type:"DELETE",success:function(e){return"success"===e.result?(a.remove(),void LMCApp.getNoty({message:LMCApp.lang.admin.flash.destroy_success.message,title:LMCApp.lang.admin.flash.destroy_success.title,type:"success"})):"error"===e.result?(LMCApp.getNoty({message:LMCApp.lang.admin.flash.destroy_error.message,title:LMCApp.lang.admin.flash.destroy_error.title,type:"error"}),void t.fadeIn()):(theDataTable.tableOptions.onDeleteError&&theDataTable.tableOptions.onDeleteError.call(e),void t.fadeIn())}})},function(){t.fadeIn()})}),theDataTable.getTableWrapper().on("click",".table-group-action-submit",function(t){t.preventDefault();var a=$(".table-group-action-input",theDataTable.getTableWrapper()),e=a;return""==e.val()?void LMCApp.getNoty({title:LMCApp.lang.admin.flash.not_select_action.title,message:LMCApp.lang.admin.flash.not_select_action.message,type:"error"}):0===theDataTable.getSelectedRowsCount()?void LMCApp.getNoty({title:LMCApp.lang.admin.flash.not_select_rows.title,message:LMCApp.lang.admin.flash.not_select_rows.message,type:"error"}):(theDataTable.setAjaxParam("action",e.val()),theDataTable.setAjaxParam("id",theDataTable.getSelectedRows()),$.ajax({url:apiGroupAction,data:theDataTable.ajaxParams,success:function(t){return"success"===t.result?void LMCApp.getNoty({title:LMCApp.lang.admin.flash.group_action_success.title,message:LMCApp.lang.admin.flash.group_action_success.message,type:"success"}):void LMCApp.getNoty({title:LMCApp.lang.admin.flash.group_action_error.title,message:LMCApp.lang.admin.flash.group_action_error.message,type:"error"})}}).done(function(t){"success"===t.result&&(LMCApp.hasTransaction=!1,theDataTable.dataTable.ajax.reload(),theDataTable.clearAjaxParams())}),void a.val(""))})}},updateCell:function(t,a,e){var l=this.getDataTable().cell(t,a);return null!==e&&l.data(e),l},countSelectedRecords:function(){var t=$('tbody > tr > td:nth-child(1) input[type="checkbox"]:checked',this.table).size(),a=this.tableOptions.dataTable.language.groupActions;t>0?$(".table-group-actions > span",this.tableWrapper).text(a.replace("_TOTAL_",t)):$(".table-group-actions > span",this.tableWrapper).text("")},getSelectedRowsCount:function(){return $('tbody > tr > td:nth-child(1) input[type="checkbox"]:checked',this.table).size()},getSelectedRows:function(){var t=[];return $('tbody > tr > td:nth-child(1) input[type="checkbox"]:checked',this.table).each(function(){t.push($(this).val())}),t},submitFilter:function(){theDataTable.setAjaxParam("action",this.tableOptions.filterApplyAction),$('textarea.form-filter, select.form-filter, input.form-filter:not([type="radio"],[type="checkbox"])',this.table).each(function(){theDataTable.setAjaxParam($(this).attr("name"),$(this).val())}),$('input.form-filter[type="checkbox"]:checked',this.table).each(function(){theDataTable.addAjaxParam($(this).attr("name"),$(this).val())}),$('input.form-filter[type="radio"]:checked',this.table).each(function(){theDataTable.setAjaxParam($(this).attr("name"),$(this).val())}),theDataTable.dataTable.ajax.reload()},resetFilter:function(){LMCApp.resetAllFormFields(this.table),this.clearAjaxParams(),this.addAjaxParam("action",this.tableOptions.filterCancelAction),this.dataTable.ajax.reload()},setAjaxParam:function(t,a){this.ajaxParams[t]=a},addAjaxParam:function(t,a){this.ajaxParams[t]||(this.ajaxParams[t]=[]),skip=!1;for(var e=0;e<this.ajaxParams[t].length;e++)this.ajaxParams[t][e]===a&&(skip=!0);skip===!1&&this.ajaxParams[t].push(a)},clearAjaxParams:function(){this.ajaxParams={}},getDataTable:function(){return this.dataTable},getTableWrapper:function(){return this.tableWrapper},getTableContainer:function(){return this.tableContainer},getTable:function(){return this.table},getActionMenu:function(t){var a='<div class="btn-group" role="group">',e=$.extend(!0,{id:-1,showUrl:"",buttons:[]},t);return a+='<a href="'+e.showUrl+'" class="btn green btn-outline tooltips" title="'+LMCApp.lang.admin.ops.show+'" style="margin-right:0;">',a+='<i class="fa fa-search"></i>',a+="</a>",e.buttons.length<1?a+"</div>":(a+='<div class="btn-group" role="group">',a+='<button type="button" class="btn green btn-outline dropdown-toggle" data-toggle="dropdown" aria-expanded="false"><i class="fa fa-angle-down"></i></button>',a+='<ul class="dropdown-menu pull-right" role="menu">',$.each(e.buttons,function(t,e){return"divider"===e?void(a+='<li class="divider" role="presentation"></li>'):(a+="<li>",a+="<a",$.each(e.attributes,function(t,e){a+=" "+t+'="'+e+'"'}),a+=">",a+=e.title,a+="</a>",void(a+="</li>"))}),a+="</ul>",a+="</div>",a+="</div>")},getDefaultOptions:function(){return{src:"",filterApplyAction:"filter",filterCancelAction:"filter_cancel",loadingMessage:"Yükleniyor...",dataTable:{dom:"<'row'<'col-md-8 col-sm-12'pli><'col-md-4 col-sm-12'<'table-group-actions pull-right'>>r><'table-responsive't><'row'<'col-md-8 col-sm-12'pli><'col-md-4 col-sm-12'>>",responsive:{details:{type:"column",target:1}},buttons:[{extend:"print",key:{key:"p",altKey:!0,shiftKey:!0},exportOptions:this.options.exportOptions},{extend:"copy",key:{key:"c",altKey:!0,shiftKey:!0},exportOptions:this.options.exportOptions},{extend:"pdf",key:{key:"d",altKey:!0,shiftKey:!0},exportOptions:this.options.exportOptions},{extend:"excel",key:{key:"e",altKey:!0,shiftKey:!0},exportOptions:this.options.exportOptions},{extend:"csv",key:{key:"v",altKey:!0,shiftKey:!0},exportOptions:this.options.exportOptions},{text:"Reload",key:{key:"r",altKey:!0,shiftKey:!0},exportOptions:this.options.exportOptions,action:function(t,a,e,l){a.ajax.reload()}}],pageLength:10,language:{decimal:",",emptyTable:"Tabloda veri yok",info:"<span class='seperator'>|</span>Toplam <strong>_TOTAL_</strong> kayıt bulundu",infoEmpty:" | Görüntülenecek sonuç bulunamadı",infoFiltered:"(Toplam _MAX_ kayıt arasından filtrelendi)",infoPostFix:"",thousands:".",lengthMenu:"<span class='seperator'>|</span>_MENU_ kayıt görüntüleniyor",loadingRecords:"Yükleniyor...",processing:"İşleniyor...",search:"Ara:",zeroRecords:"Eşleşen kayıt bulunamadı",paginate:{previous:"Önceki",next:"Sonraki",last:"Son",first:"İlk",page:"Sayfa",pageOf:"/"},aria:{sortAscending:": artan sıralama",sortDescending:": azalan sıralama"},buttons:{copySuccess:{_:"<strong>%d</strong> satır panoya kopyalandı"},copyTitle:"Veriler kopyalandı"},groupActions:"_TOTAL_ kayıt seçildi:  ",ajaxRequestGeneralErrorTitle:"İstek Tamamlanmadı",ajaxRequestGeneralError:"İstek tamamlanmadı. Lütfen internet bağlantını kontrol et."},orderCellsTop:!0,columnDefs:[{orderable:!1,searchable:!1,targets:[0,1,-1]}],bStateSave:!0,lengthMenu:[[10,20,50,100,150,-1],[10,20,50,100,150,"Hepsi"]],order:[[2,"desc"]],pagingType:"bootstrap_extended",autoWidth:!1,processing:!1,serverSide:!0,ajax:{url:"",type:"GET",timeout:2e4,data:function(t){$.each(theDataTable.ajaxParams,function(a,e){t[a]=e})},dataSrc:function(t){return 1===$(".group-checkable",theDataTable.table).size()&&($(".group-checkable",theDataTable.table).attr("checked",!1),$.uniform.update($(".group-checkable",theDataTable.table))),theDataTable.tableOptions.onSuccess&&theDataTable.tableOptions.onSuccess.call(void 0,theDataTable,t),t.data},error:function(){theDataTable.tableOptions.onError&&theDataTable.tableOptions.onError.call(void 0,theDataTable),LMCApp.getNoty({message:theDataTable.tableOptions.dataTable.language.ajaxRequestGeneralError,title:theDataTable.tableOptions.dataTable.language.ajaxRequestGeneralErrorTitle,type:"error"})}},drawCallback:function(t){theDataTable.tableInitialized===!1&&(theDataTable.tableInitialized=!0,theDataTable.table.show()),App.initUniform($('input[type="checkbox"]',theDataTable.table)),LMCApp.initTooltips(),theDataTable.countSelectedRecords(),theDataTable.tableOptions.onDataLoad&&theDataTable.tableOptions.onDataLoad.call(void 0,theDataTable)}}}}};